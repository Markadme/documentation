<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://markadme.github.io/documentation/general/framework/getting-started/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Getting started - MFR Driverless Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Getting started";
        var mkdocs_page_input_path = "general/framework/getting-started.md";
        var mkdocs_page_url = "/documentation/general/framework/getting-started/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> MFR Driverless Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">General</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../Guidelines/">Guidelines</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Framework</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Getting started</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#project-creation">Project creation</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#data-enum">Data Enum</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#nodes">Nodes</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#manager">Manager</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#special-functions">Special functions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#data-recording">Data recording</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#global-variables">Global variables</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#all-dataid">ALL DataID</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../architecture/">Architecture</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../interaction-of-the-projects/">Interaction of the projects</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Vehicle navigation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../vehicle-navigation/Overview/">Overview</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">MFR Driverless Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>General &raquo;</li>
          <li>Framework &raquo;</li>
      <li>Getting started</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="getting-started">Getting started</h1>
<h2 id="installation">Installation</h2>
<ul>
<li>download <a href="https://github.com/mfr-driverless/driverless-framework/releases/tag/v0.2.3">https://github.com/mfr-driverless/driverless-framework/releases/tag/v0.2.3</a></li>
<li>execute <code>pip install &lt;path to zip&gt;/driverless_framework-0.2.3.tar.gz</code></li>
</ul>
<blockquote>
<p><strong><em>NOTE:</em></strong>  The framework must be installed on the windows computer as well as in the WSL.</p>
</blockquote>
<hr />
<h2 id="project-creation">Project creation</h2>
<p>The following steps should be created</p>
<h3 id="data-enum">Data Enum</h3>
<pre><code class="language-python">from driverless_framework.architecture.basic_objects import IDataID
import enum

class DataID(IDataID):
    TEST_DATA = 1 
    TEST_DATA2 = 1 
</code></pre>
<h3 id="nodes">Nodes</h3>
<h4 id="data-sources">Data sources</h4>
<pre><code class="language-python">from &lt;path to id enum&gt;.DataID import DataID
from driverless_framework.architecture.basic_objects import IDataSource
from driverless_framework.architecture.data_structure import DataGroup
from driverless_framework.architecture.data_structure import DataField

class Source(IDataSource):

    def __init__(self):
        super().__init__()
        self.__registeredMethods = []

    def getName(self):
        return &quot;Source&quot;

    def registerMethod(self, dataID):
        print(&quot;Register: &quot;+str(dataID))
        self.__registeredMethods.append(dataID)

    def start(self):
        while True:
            if DataID.TEST_DATA in self.__registeredMethods:
                test_data = ... # Get required data
                self._insertData(DataID.TEST_DATA, DataField(test_data))

            if len(self.__registeredMethods) &gt; 0:
                print(&quot;Data collected...&quot;)
                self._callUpdate()
</code></pre>
<blockquote>
<p><strong><em>ℹ INFO:</em></strong>  This is a standard implementation that should be adapted to the use case. It is important that the methods are present!</p>
</blockquote>
<ul>
<li><code>registerMethod()</code> wird vor start des Managers aufgerufen. Hier werden der Source die angefragten IDs übergeben, welche wenn möglich bereitgestellt werden sollten</li>
<li><code>start()</code> is called once at startup. With <code>_insertData()</code> datasets can be provided. They are pushed into the pipeline by executing <code>_callUpdate()</code>.</li>
<li>In <code>_insertData()</code> records must be encapsulated in a <code>DataField</code> object. The data length of the entire data can also be passed here. However, this is usually only used for recorded data, since otherwise this information is not yet known at runtime.</li>
</ul>
<p>&nbsp;</p>
<h4 id="data-processors">Data processors</h4>
<pre><code class="language-python">from driverless_framework.architecture.node_types import DataProcessor
from driverless_framework.architecture.decorators.node_decorator import node
from &lt;path to id enum&gt;.DataID import DataID


class Processor(DataProcessor):

    def getName(self):
        return &quot;Processor&quot;

    @node([DataID.TEST_DATA, DataID.TEST_DATA2]) # requests datasets
    def receive(self, data):
        test_data = data.getData(DataID.TEST_DATA).data # gets requested data
        test_data2 = data.getData(DataID.TEST_DATA2).data

        self._publish(DataID.TEST_DATA3, ...) # pipes calculated data to next nodes
</code></pre>
<blockquote>
<p><strong><em>ℹ INFO:</em></strong>  it is recommended not to use an already existing id in the publish method, otherwise the following nodes can no longer access the original dataset!</p>
</blockquote>
<p>&nbsp;</p>
<h4 id="end-nodes">End nodes</h4>
<pre><code class="language-python">from driverless_framework.architecture.node_types import EndNode
from driverless_framework.architecture.decorators.node_decorator import node
from &lt;path to id enum&gt;.DataID import DataID

class ENode(EndNode):

    def getName(self):
        return &quot;ENode&quot;

    @node([DataID.TEST_DATA]) # requests datasets
    def receive(self, data):
        test_data = data.getData(DataID.TEST_DATA).data # gets requested data
</code></pre>
<blockquote>
<p><strong><em>ℹ INFO:</em></strong>  an endNode is comparable to a dataprocessor, except that you can't publish (pass on) data.</p>
</blockquote>
<p>&nbsp;</p>
<h3 id="manager">Manager</h3>
<pre><code class="language-python">import driverless_framework.architecture as a

# Source(), EndNode() and Processor() has to be replaced
manager = a.ManagerBuilder(Source(), EndNode()) \
    .addProcessorNode(Processor()) \
    .build()

manager.start()
</code></pre>
<blockquote>
<p><strong><em>ℹ INFO:</em></strong>  The manager merges the notes into a pipeline and executes it. The further behavior is primarily regulated in the source node.</p>
</blockquote>
<p>&nbsp;</p>
<hr />
<h2 id="special-functions">Special functions</h2>
<h3 id="data-recording">Data recording</h3>
<pre><code class="language-python">import driverless_framework.architecture as a
import driverless_framework.architecture.basic_nodes as b

manager = a.ManagerBuilder(b.Player(&quot;&lt;path&gt;&quot;, loop=True), b.Recorder(&quot;&lt;path&gt;&quot;)) \
    .addProcessorNode(Processor()) \
    .build()

manager.start()
</code></pre>
<ul>
<li><code>loop</code> means that when the end of the recording is reached, it is played again from the beginning.</li>
</ul>
<p>&nbsp;</p>
<h3 id="global-variables">Global variables</h3>
<pre><code class="language-python">self._publish(DataID.TEST_DATA3, ..., globalVariable=True)
</code></pre>
<blockquote>
<p><strong><em>ℹ INFO:</em></strong>  Global variables are multithreading safe for calling in ros. The last value entered is always used. This allows data from nodes further down the pipeline to be sent to nodes further up the pipeline, which can retrieve the data like a normal dataset on the next pipeline run. Global variables are declared via an extra enum that inherits from IGlobalDataID.</p>
</blockquote>
<p>&nbsp;</p>
<h3 id="all-dataid">ALL DataID</h3>
<p>It is possible by importing the <code>BasicDataID</code> enum and specifying it in the node anotation (<code>BasicDataID.ALL</code>) to get all datasets that have already been requested by a previous node. This is mainly intended for recording the data or a possible publication in the ros bridge. Usually this is only used in an EndNode.</p>
<p>&nbsp;</p>
<hr />
<h2 id="testing">Testing</h2>
<p>The framework offers a testcontainer for testing purposes. Here a processor node can be called like a normal function. The method expects a DataGroup with all required data sets as attribute. The output is also a DataGroup.</p>
<pre><code class="language-python">group = DataGroup(0)
group.addData(DataID.TEST_DATA, DataField(&lt;data&gt;))
group.addData(DataID.TEST_DATA2, DataField(&lt;data&gt;))

output = TestContainer(Processor()).test(group) # Processor is the Node to test
out_data = output.getData(DataID.TEST_DATA3).data
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../Guidelines/" class="btn btn-neutral float-left" title="Guidelines"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../architecture/" class="btn btn-neutral float-right" title="Architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../Guidelines/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../architecture/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
